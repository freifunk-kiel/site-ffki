{
  domain_names = {
    kiel_zentrum = 'Kiel Zentrum',
    kiel_gaarden = 'Kiel Gaarden',
    kiel_wik = 'Kiel Wik',
    kiel_kronshagen = 'Kronshagen',
    kiel_laboe = 'Laboe'
  },
  
  -- Must be the same of all nodes in one mesh domain
  domain_seed = 'd6c58c17e655c52c12e9d8ad1b546a264124dd33dd8a00a39ee528778c2b1c47',
  
  prefix4 = '10.116.128.0/17',
  prefix6 = 'fda1:384a:74de:4242::/64',
  
  ntp_servers = {'1.ntp.services.ffki'},
  
  -- The next node feature allows clients to always reach the node it is
  -- connected to using a known IP address.
  next_node = {
    name = {
      'node.ffki',
      'nextnode.ffki',
      'knoten.ffki',
      'nextnode',
      'nn',
    },
    -- anycast IPs of all nodes
    ip4 = '10.116.254.254',
    ip6 = 'fda1:384a:74de:4242::ffff',
    
    -- anycast MAC of all nodes (legacy)
    mac = '36:f4:54:fc:e5:11'
  },
  
  ddhcpd = {
    enabled = true,
    range = "10.116.160.0/19",
    broadcast = "10.116.255.255"
  },
  
  -- Wireless configuration for 2.4 GHz interfaces.
  wifi24 = {
    channel = 11,
    
    -- ESSID used for client network.
    ap = {
      ssid = 'http://kiel.freifunk.net/',
      -- disabled = true, (optional)
    },
    mesh = {
      id = '16:ca:ff:ee:ba:be',
      mcast_rate = 12000,
      disabled = false,
    },
  },
  
  -- Wireless configuration for 5 GHz interfaces.
  -- This should be equal to the 2.4 GHz variant, except
  -- for channel.
  wifi5 = {
    channel = 44,
    ap = {
      ssid = 'http://kiel.freifunk.net/',
    },
    mesh = {
      id = '64:ca:ff:ee:ba:be',
      mcast_rate = 12000,
      disabled = false,
    },
  },
  
  mesh = {
    -- (vxlan=false is legacy)
    vxlan = false,
    -- Options specific to the batman-adv routing protocol (optional)
    batman_adv = {
      -- Gateway selection class (optional)
      -- The default class 20 is based on the link quality (TQ) only,
      -- class 1 is calculated from both the TQ and the announced bandwidth
      -- class 3 -> fast switch connection, chooses the gateway with the best 
      --            link quality but switches to another gateway 
      --            as soon as a better one is found
      gw_sel_class = 3,
      routing_algo = 'BATMAN_IV',
    },
  },
  
  mesh_vpn = {
    mtu = 1280,
    
    fastd = {
      methods = {'salsa2012+umac'},
      groups = {
        backbone = {
          -- Limit number of connected peers to reduce bandwidth.
          limit = 1,
          peers = {
            -- $ for i in $(seq 0 8); do echo ffki_vpn$i; fastd --generate-key 2>/dev/null; done
            ffki_vpn0 = {
              key = '7d0f990707f842ec2dc05392d1153b8c98c90decca2adb1fd08aaee6da832b4b',
              remotes = {
                'ipv6 "vpn0.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn0.freifunk.in-kiel.de" port 10000',
              },
            },
            ffki_vpn1 = {
              key = 'c12ccca4519dcce8f9cd1c785f30983e02679d99be30dc8ceae859e589ba68ae',
              remotes = {
                'ipv6 "vpn1.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn1.freifunk.in-kiel.de" port 10000',
              },
            },
            ffki_vpn2 = {
              key = '560f72afecc6da647cb30912f3c658bbe2ad58bd6e5473d959104d9af7b6bc58',
              remotes = {
                'ipv6 "vpn2.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn2.freifunk.in-kiel.de" port 10000',
              },
            },
            ffki_vpn3 = {
              key = '94829d3d9b6396264e03e42520d5fc1d74cc8dbfee15984b674e63e5bd72e0eb',
              remotes = {
                'ipv6 "vpn3.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn3.freifunk.in-kiel.de" port 10000',
              },
            },
            ffki_vpn4 = {
              key = '525d4879c70ed05cda2e9fdbdb48d0bba317b4a0d851c83202ea6fc927ca29db',
              remotes = {
                'ipv6 "vpn4.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn4.freifunk.in-kiel.de" port 10000',
              },
            },
            ffki_vpn5 = {
              key = '5f7b65b030111c1cfe4a2de4359d88c887d771345311b225e2a992a5660fe800',
              remotes = {
                'ipv6 "vpn5.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn5.freifunk.in-kiel.de" port 10000',
              },
            },
            ffki_vpn6 = {
              key = 'f40d8c5a2ef99aba47742d65d061b84f8696691ae84b6d9234a0915d9e8d6268',
              remotes = {
                'ipv6 "vpn6.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn6.freifunk.in-kiel.de" port 10000',
              },
            },
            ffki_vpn7 = {
              key = '7a05b3ef82a30cbd2ea7996eb214c885b1bb1133e6510ef4e73df167f741e78b',
              remotes = {
                'ipv6 "vpn7.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn7.freifunk.in-kiel.de" port 10000',
              },
            },
            ffki_vpn8 = {
              key = 'de0a4ec6a6e162094b74a9cd3e783be7dd5e5b2b1c04246dd9272c4a59422409',
              remotes = {
                'ipv6 "vpn8.freifunk.in-kiel.de" port 10000',
                'ipv4 "vpn8.freifunk.in-kiel.de" port 10000',
              },
            },
          },
        },
      },
    },
  },
}
